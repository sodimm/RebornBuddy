<?xml version="1.0" encoding="UTF-8"?>
<!--
Profile:  [Orderbot] Yanxia Aether Current Quests
Authors:  Sodimm, TuckMeIntoBread
-->
<Profile>
  <Name>[Orderbot] Yanxia Aether Current Quests</Name>
  <BehaviorDirectory>..\Quest Behaviors</BehaviorDirectory>
  <Order>
    <!-- Something Smells (3) -->
    <If Condition="IsQuestCompleted(68029) and not HasQuest(68260) and not IsQuestCompleted(68260)">
      <GetTo ZoneId="614" XYZ="422.55, -0.3000118, -292.1723"/>
      <If Condition="IsQuestAcceptQualified(68260)">
        <PickupQuest QuestId="68260" NpcId="1019314" XYZ="422.55, -0.3000118, -292.1723"/>
      </If>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 0">
      <GetTo ZoneId="614" XYZ="473.6745, 28.62518, -213.2056"/>
      <UseItem ItemId="2002241" NpcId="2008461" XYZ="473.6745, 28.62518, -213.2056" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 0"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 1">
      <GetTo ZoneId="614" XYZ="568.6186, 43.71805, -144.9701"/>
      <UseItem ItemId="2002241" NpcId="2008462" XYZ="568.6186, 43.71805, -144.9701" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 1"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 2">
      <GetTo ZoneId="614" XYZ="530.5948, 84.82678, -302.2884"/>
      <UseItem ItemId="2002241" NpcId="2008463" XYZ="530.5948, 84.82678, -302.2884" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 2"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 3">
      <GetTo ZoneId="614" XYZ="486.4256, 65.75549, -24.494"/>
      <UseItem ItemId="2002241" NpcId="2008466" XYZ="486.4256, 65.75549, -24.494" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 3"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 4">
      <GetTo ZoneId="614" XYZ="537.121, 61.16649, -11.21327"/>
      <UseItem ItemId="2002241" NpcId="2008464" XYZ="537.121, 61.16649, -11.21327" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 4"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 5">
      <GetTo ZoneId="614" XYZ="382.3456, 41.04817, -30.65896"/>
      <UseItem ItemId="2002241" NpcId="2008465" XYZ="382.3456, 41.04817, -30.65896" Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 1 and GetQuestById(68260).GetTodoArgs(1, 0).Item1 == 5"/>
    </If>
    <If Condition="HasQuest(68260) and not IsQuestCompleted(68260) and GetQuestStep(68260) == 255">
      <GetTo ZoneId="614" XYZ="421.8271, -0.3000133, -292.9956"/>
      <TurnIn QuestId="68260" NpcId="1019314" XYZ="421.8271, -0.3000133, -292.9956"/>
    </If>
    <!-- Fly, My Pretties (2) -->
    <If Condition="IsQuestCompleted(68029) and not HasQuest(68264) and not IsQuestCompleted(68264)">
      <GetTo ZoneId="614" XYZ="452.7337, 58.69245, -186.7468"/>
      <If Condition="IsQuestAcceptQualified(68264)">
        <PickupQuest QuestId="68264" NpcId="1019263" XYZ="452.7337, 58.69245, -186.7468"/>
      </If>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 1">
      <GetTo ZoneId="614" XYZ="361.9062, 90.70435, -166.621"/>
      <TalkTo NpcId="1019264" XYZ="361.9062, 90.70435, -166.621" QuestId="68264" StepId="1"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 0">
      <GetTo ZoneId="614" XYZ="378.599, 90.70438, -135.6643"/>
      <UseObject NpcId="2008352" XYZ="378.599, 90.70438, -135.6643" Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 0"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 1">
      <GetTo ZoneId="614" XYZ="351.6993, 97.62133, -135.6582"/>
      <UseObject NpcId="2008353" XYZ="351.6993, 97.62133, -135.6582" Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 1"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 2">
      <GetTo ZoneId="614" XYZ="369.0254, 97.62137, -103.822"/>
      <UseObject NpcId="2008354" XYZ="369.0254, 97.62137, -103.822" Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 2 and GetQuestById(68264).GetTodoArgs(2, 0).Item1 == 2"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 3">
      <GetTo ZoneId="614" XYZ="362.4651, 90.70435, -163.1638"/>
      <TalkTo NpcId="1019264" XYZ="362.4651, 90.70435, -163.1638" QuestId="68264" StepId="3"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 4">
      <GetTo ZoneId="614" XYZ="333.7911, 100.9256, -109.2386"/>
      <UseItem ItemId="2002213" NpcId="2008355" XYZ="333.7911, 100.9256, -109.2386" QuestId="68264" StepId="4"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 5">
      <GetTo ZoneId="614" XYZ="333.7911, 100.9256, -109.2386"/>
      <SoEmoteNpc NpcId="1022071" Emote="clap" XYZ="333.7911, 100.9256, -109.2386" QuestId="68264" StepId="5"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 6">
      <GetTo ZoneId="614" XYZ="361.8908, 90.70435, -163.9115"/>
      <TalkTo NpcId="1019264" XYZ="361.8908, 90.70435, -163.9115" QuestId="68264" StepId="6"/>
    </If>
    <If Condition="HasQuest(68264) and not IsQuestCompleted(68264) and GetQuestStep(68264) == 255">
      <GetTo ZoneId="614" XYZ="452.3793, 58.73328, -187.5235"/>
      <TurnIn QuestId="68264" NpcId="1019263" XYZ="452.3793, 58.73328, -187.5235"/>
    </If>
    <!-- Whacking Day (1) -->
    <If Condition="IsQuestCompleted(68030) and not HasQuest(68266) and not IsQuestCompleted(68266)">
      <GetTo ZoneId="614" XYZ="463.3003, 58.51415, -171.8306"/>
      <If Condition="IsQuestAcceptQualified(68266)">
        <PickupQuest QuestId="68266" NpcId="1019313" XYZ="463.3003, 58.51415, -171.8306"/>
      </If>
    </If>
    <If Condition="HasQuest(68266) and not IsQuestCompleted(68266) and GetQuestStep(68266) == 1">
      <GetTo ZoneId="614" XYZ="162.1497, -0.2999607, 211.0351"/>
      <Grind GrindRef="Water_Serpent" PostCombatDelay="3.0" While="HasQuest(68266) and not IsQuestCompleted(68266) and GetQuestStep(68266) == 1"/>
    </If>
    <If Condition="HasQuest(68266) and not IsQuestCompleted(68266) and GetQuestStep(68266) == 255">
      <GetTo ZoneId="614" XYZ="758.0844, 98.22374, -230.6801"/>
      <TurnIn ItemIds="2002239" QuestId="68266" NpcId="1019295" XYZ="758.0844, 98.22374, -230.6801"/>
    </If>
    <!-- Wolves and Weeds (0) -->
    <If Condition="IsQuestCompleted(68030) and not HasQuest(68269) and not IsQuestCompleted(68269)">
      <GetTo ZoneId="614" XYZ="435.0469, 67.97929, -122.4264"/>
      <If Condition="IsQuestAcceptQualified(68269)">
        <PickupQuest QuestId="68269" NpcId="1019316" XYZ="435.0469, 67.97929, -122.4264"/>
      </If>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 1">
      <GetTo ZoneId="614" XYZ="529.5389, 19.57064, 351.7494"/>
      <TalkTo NpcId="1022457" XYZ="529.5389, 19.57064, 351.7494" QuestId="68269" StepId="1"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 2">
      <GetTo ZoneId="614" XYZ="212.3311, 7.480262, 499.3141"/>
      <TalkTo NpcId="1022458" XYZ="212.3311, 7.480262, 499.3141" QuestId="68269" StepId="2"/>
      <WaitWhile Condition="HasQuest(68269) and not IsQuestCompleted(68269) and not GetQuestStep(68269) == 3"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 3">
      <GetTo ZoneId="614" XYZ="210.2526, 7.365303, 500.3107"/>
      <UseObject NpcId="2008518" XYZ="210.2526, 7.365303, 500.3107" QuestId="68269" StepId="3"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 4">
      <GetTo ZoneId="614" XYZ="529.6653, 19.51778, 352.0714"/>
      <HandOver ItemIds="2002248" NpcId="1022457" XYZ="529.6653, 19.51778, 352.0714" QuestId="68269" StepId="4"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 5">
      <GetTo ZoneId="614" XYZ="619.8672, -0.5999999, 559.8383"/>
      <RunCode Name="Wolves_And_Weeds"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 6">
      <GetTo ZoneId="614" XYZ="529.7897, 19.59827, 351.7205"/>
      <HandOver ItemIds="2002249" NpcId="1022457" XYZ="529.7897, 19.59827, 351.7205" QuestId="68269" StepId="6"/>
    </If>
    <If Condition="HasQuest(68269) and not IsQuestCompleted(68269) and GetQuestStep(68269) == 255">
      <GetTo ZoneId="614" XYZ="434.9989, 67.98668, -123.4497"/>
      <TurnIn QuestId="68269" NpcId="1019316" XYZ="434.9989, 67.98668, -123.4497"/>
    </If>
  </Order>
  <GrindAreas>
    <GrindArea Name="Water_Serpent">
      <Hotspots>
        <Hotspot XYZ="162.1497, -0.2999607, 211.0351" Radius="90"/>
      </Hotspots>
      <TargetMobs>
        <TargetMob Id="5762"/>
      </TargetMobs>
      <MinLevel/>
      <MaxLevel/>
    </GrindArea>
  </GrindAreas>
  <CodeChunks>
    <CodeChunk Name="Wolves_And_Weeds">
      <![CDATA[
        if (MovementManager.IsSwimming)
        {
          MovementManager.StartDescending();
          await Coroutine.Wait(10000, () => MovementManager.IsDiving);
        }

        MovementManager.StopDescending();
        await Coroutine.Sleep(2000);

        if (MovementManager.IsDiving)
        {
          await CommonTasks.DescendTo(-48.66101f);
          GameObjectManager.GetObjectByNPCId(2008519).Interact();
          await Coroutine.Wait(10000, ()=> !GameObjectManager.GetObjectByNPCId(2008519).IsVisible);
          MovementManager.StartAscending();
          await Coroutine.Wait(30000, () => !MovementManager.IsDiving);
        }

        MovementManager.StopAscending();
        await Coroutine.Sleep(2000);
      ]]>
    </CodeChunk>
  </CodeChunks>
</Profile>
